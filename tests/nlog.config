<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <variable name="ShouldSerializeWithAllDetails" value="0" />
  <targets>
    <!-- another file log, only own logs. Uses some ASP.NET core renderers -->
    <target name="KraftFile" xsi:type="File" fileName="${basedir}/Logs/nlog-kraft-${shortdate}.log"
            layout="${longdate}|${event-properties:item=EventId.Id}|${logger}|${uppercase:${level}}|  ${message} ${exception}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action} ${newline} ${mdc:item=KraftError} ${newline} ${mdc:item=Args}" />

    <target name="Console" xsi:type="Console" 
            layout="${longdate}|${event-properties:item=EventId.Id}|${logger}|${uppercase:${level}}|  ${message} ${exception}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action} ${newline} ${mdc:item=KraftError} ${newline} ${mdc:item=Args}" />
  </targets>
  
  <rules>
    <logger name="*" minlevel="Info" writeTo="KraftFile" />
    <logger name="*" minlevel="Trace" writeTo="Console" />
  </rules>
</nlog>

<!--
Fatal: Highest level: important stuff down
Error: For example application crashes / exceptions.
Warn: Incorrect behavior but the application can continue
Info: Normal behavior like mail sent, user updated profile etc.
Debug: Executed queries, user authenticated, session expired
Trace: Begin method X, end method X etc
-->